---
import grilles from "../assets/grilles.webp";

interface Props {
  projet: any;
}

const { projet } = Astro.props;
---

{
  (projet.contexte ||
    projet.pourquoi ||
    projet.concept_visualisation ||
    projet.description) && (
    <section
      class="w-full h-fit bg-center bg-cover flex flex-col items-center py-12 sm:py-16 md:py-24 lg:py-32 relative"
      id="concept"
      style={`background-image: url(${grilles.src});`}
    >
      <h2 class="h2 relative z-10 px-4">
        &lt;LE <span class="text-primary">CONCEPT</span>&gt;
      </h2>
      <div class="w-full max-w-7xl grid gap-3 sm:gap-4 mt-6 sm:mt-8 md:mt-10 lg:mt-12 px-3 sm:px-4 min-h-auto sm:min-h-[40dvh] md:min-h-[55dvh] lg:h-[60dvh] relative z-10 grid-cols-1 lg:grid-cols-3">
        <div
          class="w-full h-[35dvh] sm:h-[40dvh] md:h-[52dvh] lg:h-full rounded-2xl sm:rounded-3xl overflow-hidden relative flex items-center justify-center"
          style="background: radial-gradient(circle at center, #7665F3 0%, #7665F3 38%, #4C39D8 100%);"
        >
          <div class="noise" />
          {projet.concept_visualisation && (
            <img
              src={projet.concept_visualisation}
              alt="Concept visualization"
              loading="lazy"
              class="relative z-10"
              style="object-fit: contain; max-width: 85%; max-height: 85%;"
            />
          )}
        </div>

        <div class="w-full flex flex-col gap-3 sm:gap-4 lg:col-span-2">
          {(projet.titre || projet.description) && (
            <div class="w-full h-auto sm:h-auto md:h-auto lg:h-1/2 rounded-2xl sm:rounded-3xl relative border border-white/10 shadow-[0_0_30px_rgba(255,255,255,0.08),inset_-5px_-5px_15px_rgba(0,0,0,0.5)] overflow-hidden backdrop-blur-[50px]">
              <div
                class="absolute inset-0"
                style="background: radial-gradient(circle at center, rgba(53, 63, 82, 0.75) 0%, rgba(53, 63, 82, 0.75) 38%, rgba(45, 54, 71, 0.75) 100%);"
              />
              <div class="noise absolute inset-0" />
              <div class="absolute inset-0 pointer-events-none bg-linear-to-t from-black/60 to-transparent" />
              <div class="relative z-20 w-full h-full p-4 sm:p-6 md:p-8 flex flex-col justify-start gap-1 sm:gap-2 min-h-[200px]">
                {projet.titre && <h2 class="h3">{projet.titre}</h2>}
                {projet.description && (
                  <p class="leading-relaxed line-clamp-4 sm:line-clamp-none">
                    {projet.description}
                  </p>
                )}
              </div>
            </div>
          )}

          <div class="w-full flex flex-col sm:flex-row gap-3 sm:gap-4 lg:h-1/2">
            {projet.contexte && (
              <div
                class="w-full sm:flex-1 rounded-2xl sm:rounded-3xl relative border border-white/10 shadow-[0_0_30px_rgba(255,255,255,0.08),inset_-5px_-5px_15px_rgba(0,0,0,0.5)] overflow-hidden backdrop-blur-[50px] flex flex-col justify-between p-4 sm:p-6 md:p-8 transition-all duration-300 min-h-[180px]"
                style="background: radial-gradient(circle at center, rgba(53, 63, 82, 0.75) 0%, rgba(53, 63, 82, 0.75) 38%, rgba(45, 54, 71, 0.75) 100%);"
              >
                <div class="noise absolute inset-0" />
                <div class="absolute inset-0 pointer-events-none bg-linear-to-t from-black/60 to-transparent" />
                <div class="w-full relative z-20 flex flex-col justify-start gap-1 sm:gap-2">
                  <h2 class="h3">Contexte</h2>
                  <p class="leading-relaxed">{projet.contexte}</p>
                </div>
              </div>
            )}

            {projet.pourquoi && (
              <div
                class="w-full sm:flex-1 rounded-2xl sm:rounded-3xl relative border border-white/10 shadow-[0_0_30px_rgba(255,255,255,0.08),inset_-5px_-5px_15px_rgba(0,0,0,0.5)] overflow-hidden backdrop-blur-[50px] flex flex-col justify-between p-4 sm:p-6 md:p-8 transition-all duration-300 min-h-[180px]"
                style="background: radial-gradient(circle at center, rgba(53, 63, 82, 0.75) 0%, rgba(53, 63, 82, 0.75) 38%, rgba(45, 54, 71, 0.75) 100%);"
              >
                <div class="noise absolute inset-0" />
                <div class="absolute inset-0 pointer-events-none bg-linear-to-t from-black/60 to-transparent" />
                <div class="w-full relative z-20 flex flex-col justify-start gap-1 sm:gap-2">
                  <h2 class="h3">Pourquoi ?</h2>
                  <p class="leading-relaxed">{projet.pourquoi}</p>
                </div>
              </div>
            )}
          </div>
        </div>
      </div>
    </section>
  )
}
